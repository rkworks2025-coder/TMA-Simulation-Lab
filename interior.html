<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>車内清掃（入力）</title>
    
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/common.css" />
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        $(function() {
            // 初期化：データ復元
            loadFormData();

            // 一時保存ボタン
            $('#btn-temporary').on('click', function(e) {
                e.preventDefault();
                saveFormData();
                localStorage.setItem('dummy_status_interior', 'temporary');
                alert('入力内容を一時保存しました。');
                location.href = 'index.html';
            });

            // 完了ボタン
            $('#btn-complete').on('click', function(e) {
                e.preventDefault();
                saveFormData();

                // NG判定（value="9"が含まれていればNG）
                var isNG = false;
                $('input[type="radio"]:checked').each(function() {
                    if ($(this).val() === "9") {
                        isNG = true;
                    }
                });

                if (isNG) {
                    localStorage.setItem('dummy_status_interior', 'ng');
                    alert('異常（NG）項目が含まれています。\nステータス：点検NG で登録します。');
                } else {
                    localStorage.setItem('dummy_status_interior', 'ok');
                    alert('車内清掃を完了しました。\nステータス：点検OK');
                }
                
                location.href = 'index.html';
            });
        });

        function saveFormData() {
            var formData = {};
            $('input[type="radio"]:checked').each(function() {
                formData[$(this).attr('name')] = $(this).val();
            });
            localStorage.setItem('dummy_form_data_interior', JSON.stringify(formData));
        }

        function loadFormData() {
            var data = localStorage.getItem('dummy_form_data_interior');
            if (data) {
                var formData = JSON.parse(data);
                $.each(formData, function(key, value) {
                    if ($('input[name="' + key + '"][type="radio"]').length) {
                        $('input[name="' + key + '"][value="' + value + '"]').prop('checked', true);
                    }
                });
            }
        }
    </script>
    
    <style>
        /* ページ固有の微調整 */
        .footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #fff; padding: 10px 0; border-top: 1px solid #ddd;
            z-index: 999; box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        .footer-button { display: flex; justify-content: center; gap: 15px; }
        .footer-btn-link {
            display: flex; justify-content: center; align-items: center;
            width: 45%; max-width: 200px; height: 45px;
            text-decoration: none; font-weight: bold; border-radius: 4px; cursor: pointer;
        }
        .is-stop { background: #fff; color: #333; border: 1px solid #ccc; }
        .is-complete { background: #d00; color: #fff; border: 1px solid #a00; }
        body { padding-bottom: 100px; }
    </style>
</head>
<body>
    
    <header class="new-wb-header">
      <nav>
        <p class="userName2"><span>【ＴＳ委託】カーケアジャパン (Test)</span></p>
      </nav>
    </header>
    
    <main class="main">
        <div class="info-area">
            <h1 class="car-another-title">車内清掃（入力）</h1>
            <p class="car-number-text">相模 501 ワ 7725</p>
        </div>

        <form id="interiorForm">
            
            <h2 class="contents-title needs">内装・窓ガラス清掃・異臭</h2>
            <div class="contents-block">
                <p class="contents-inner-text">
                    内装の清掃（重要箇所：ドアポケット・センターコンソール・ダッシュボード・シート下・ヘッドレスト）<br>
                    内窓・外窓（油膜）・サイドミラー・バックミラーの清掃<br>
                    各種伝票の回収、破棄
                </p>
                <p class="contents-inner-text">
                    <span class="notice-text txt-red">ヘッドレストがない、極端な異臭や汚れが残る場合は「NG（稼動停止）」</span>
                </p>
                <div class="content-radio twoChoices">
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select" name="interiorDirt" id="interiorDirt01" value="1">
                        <label for="interiorDirt01">OK</label>
                    </div>
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select error" name="interiorDirt" id="interiorDirt03" value="9">
                        <label for="interiorDirt03">NG（稼動停止）</label>
                    </div>
                </div>
            </div>

            <h2 class="contents-title needs">車内不具合確認</h2>
            <div class="contents-block">
                <p class="contents-inner-text">
                    運転席マットストッパー設置状況：破損、未設置がないか<br>
                    エアコンの不具合確認：夏場は冷風が出るか、極端な異臭がないか
                </p>
                <p class="contents-inner-text">
                    <span class="notice-text txt-red">上記の不具合が確認された場合は「NG（稼動停止）」</span>
                </p>
                <div class="content-radio twoChoices">
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select" name="interiorCheckTrouble" id="interiorCheckTrouble01" value="1">
                        <label for="interiorCheckTrouble01">OK</label>
                    </div>
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select error" name="interiorCheckTrouble" id="interiorCheckTrouble03" value="9">
                        <label for="interiorCheckTrouble03">NG（稼動停止）</label>
                    </div>
                </div>
            </div>

            <h2 class="contents-title needs">カーナビ（ラジオ）・ETC・車内時計</h2>
            <div class="contents-block">
                <h3>設定</h3>
                <p class="contents-inner-text">
                    <span>カーナビ（ラジオ）・ETCの音量が0（ゼロ）でないことを確認</span><br>
                    <span>車両時刻とカーナビ時刻を確認（相違の場合、カーナビの時刻に合わせる）</span>
                </p>
                <p class="contents-inner-text">
                    <span class="notice-text txt-red">故障の場合は「NG（稼動停止）」</span>
                </p>
                <div class="content-radio twoChoices">
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select" name="soundVolume" id="soundVolume01" value="1">
                        <label for="soundVolume01">OK</label>
                    </div>
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select error" name="soundVolume" id="soundVolume03" value="9">
                        <label for="soundVolume03">NG（稼動停止）</label>
                    </div>
                </div>
            </div>

            <h2 class="contents-title needs">忘れ物</h2>
            <div class="contents-block">
                <div class="content-radio twoChoices">
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select" name="lostArticle" id="lostArticle01" value="1">
                        <label for="lostArticle01">なし</label>
                    </div>
                    <div class="content-radio-block">
                        <input type="radio" class="radio-select" name="lostArticle" id="lostArticle03" value="2">
                        <label for="lostArticle03">あり</label>
                    </div>
                </div>
            </div>

        </form>

        <div class="footer">
            <div class="footer-button">
                <a id="btn-temporary" class="footer-btn-link is-stop">一時保存</a>
                <a id="btn-complete" class="footer-btn-link is-complete">完了</a>
            </div>
        </div>
    </main>
</body>
</html>

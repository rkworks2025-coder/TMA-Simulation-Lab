<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex"/>
  
  <title>日常点検 (Training Mode)</title>

  <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css" href="css/reset.css" />
  <link rel="stylesheet" type="text/css" href="css/common.css" />
  <link rel="stylesheet" type="text/css" href="css/taw0101002.css" />

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

  <script>
    /**
     * 練習用：日常点検ロジック
     */
    $(function() {
        // 1. タブ切り替え制御
        $('.tab-button').on('click', function(e) {
            e.preventDefault();
            const target = $(this).attr('data-name');
            
            // タブの見た目更新
            $('.tab-button').removeClass('active');
            $(this).addClass('active');
            
            // コンテンツの切り替え
            $('.tab-contents').hide().removeClass('active');
            $('#' + target).show().addClass('active');
            
            // スクロールトップ
            window.scrollTo(0, 0);
        });

        // 初期表示（最初のタブ以外を隠す）
        $('.tab-contents').hide();
        $('#engine').show();

        // 2. データの復元
        loadFormData();

        // 3. 一時保存アクション
        $('#btn-save').on('click', function(e) {
            e.preventDefault();
            saveFormData();
            localStorage.setItem('dummy_status_daily', 'temporary');
            alert('入力内容を一時保存しました。');
            location.href = 'index.html';
        });

        // 4. 完了アクション
        $('#btn-complete').on('click', function(e) {
            e.preventDefault();
            saveFormData();

            // NG項目の判定 (valueが9または8のラジオボタンがチェックされているか)
            let isNG = false;
            $('input[type="radio"]:checked').each(function() {
                const val = $(this).val();
                if (val === "9" || val === "8") {
                    isNG = true;
                }
            });

            if (isNG) {
                localStorage.setItem('dummy_status_daily', 'ng');
                alert('異常（NG）項目が含まれています。\n「点検NG」として登録しました。');
            } else {
                localStorage.setItem('dummy_status_daily', 'ok');
                alert('日常点検を完了しました。\n「点検OK」として登録しました。');
            }
            location.href = 'index.html';
        });
    });

    function saveFormData() {
        const formData = {};
        // ラジオボタン
        $('input[type="radio"]:checked').each(function() {
            formData[$(this).attr('name')] = $(this).val();
        });
        // チェックボックス
        $('input[type="checkbox"]:checked').each(function() {
            formData[$(this).attr('name')] = true;
        });
        // テキスト・数値
        $('input[type="text"], input[type="number"], input[type="month"]').each(function() {
            formData[$(this).attr('id') || $(this).attr('name')] = $(this).val();
        });
        localStorage.setItem('dummy_form_daily', JSON.stringify(formData));
    }

    function loadFormData() {
        const saved = localStorage.getItem('dummy_form_daily');
        if (!saved) return;
        const data = JSON.parse(saved);
        $.each(data, function(key, val) {
            const $el = $(`[name="${key}"], #[${key}]`);
            if ($el.is(':radio')) {
                $(`input[name="${key}"][value="${val}"]`).prop('checked', true);
            } else if ($el.is(':checkbox')) {
                $el.prop('checked', true);
            } else {
                $el.val(val);
            }
        });
    }
  </script>

  <style>
    /* 練習用レイアウト調整 */
    .footer {
        position: fixed; bottom: 0; left: 0; width: 100%;
        background: #333; padding: 10px 0; display: flex; justify-content: center; gap: 10px; z-index: 1000;
    }
    .footer-button { width: 100%; max-width: 600px; display: flex; justify-content: space-around; padding: 0 10px; }
    .footer-button a { 
        display: flex; align-items: center; justify-content: center;
        width: 45%; height: 45px; border-radius: 4px; font-weight: bold; cursor: pointer;
    }
    .is-stop { background: #fff; color: #333; border: 1px solid #ccc; }
    .is-complete { background: #ffd700; color: #333; border: 1px solid #e6c200; }
    body { padding-bottom: 80px; }
    .tab-contents { padding: 10px; background: #f2f2f2; }
  </style>
</head>
<body>
    <header class="new-wb-header">
      <nav><p class="userName2"><span>【ＴＳ委託】カーケアジャパン (練習用)</span></p></nav>
    </header>
    
    <main class="main">
        <div class="info-area">
            <h1 class="car-another-title">日常点検（入力）</h1>
            <p class="car-number-text">相模 501 ワ 7725</p>
        </div>

        <div class="container">
            <div class="tab-container">
                <div class="tab">
                    <div class="tab-button active" data-name="engine"><a href="#">エンジンルーム</a></div>
                    <div class="tab-button" data-name="tire"><a href="#">タイヤ</a></div>
                    <div class="tab-button" data-name="motion"><a href="#">動作確認</a></div>
                    <div class="tab-button" data-name="in-car"><a href="#">車載品(運転席)</a></div>
                    <div class="tab-button" data-name="equipment"><a href="#">装備確認</a></div>
                    <div class="tab-button" data-name="light"><a href="#">灯火装置</a></div>
                    <div class="tab-button" data-name="perimeter"><a href="#">車両周り他</a></div>
                    <div class="tab-button" data-name="trunk"><a href="#">車載品(トランク)</a></div>
                </div>
            </div>

            <form id="daily-check-form">
                <div id="engine" class="tab-contents active">
                    <h2 class="contents-title">冷却水量</h2>
                    <div class="contents-block">
                        <p class="contents-inner-text">タンク内の「FULL」と「LOW」の間が適量。液漏れ等は「NG」</p>
                        <div class="content-radio tripleChoices">
                            <div class="content-radio-block"><input type="radio" name="coolantGauge" value="2" id="c1"><label for="c1">OK(未補充)</label></div>
                            <div class="content-radio-block"><input type="radio" name="coolantGauge" value="1" id="c2"><label for="c2">OK(補充)</label></div>
                            <div class="content-radio-block"><input type="radio" name="coolantGauge" value="9" id="c3"><label for="c3">NG(停止)</label></div>
                        </div>
                    </div>
                    <h2 class="contents-title">エンジンオイル量</h2>
                    <div class="contents-block">
                        <div class="content-radio twoChoices">
                            <div class="content-radio-block"><input type="radio" name="engineOilGauge" value="1" id="o1"><label for="o1">OK</label></div>
                            <div class="content-radio-block"><input type="radio" name="engineOilGauge" value="9" id="o2"><label for="o2">NG(停止)</label></div>
                        </div>
                    </div>
                </div>

                <div id="tire" class="tab-contents">
                    <h2 class="contents-title">指定空気圧</h2>
                    <div class="contents-block">
                        <ul class="contents-list">
                            <li><h3>前輪</h3><input type="number" id="tireFrontRegularPressure" name="tireFrontRegularPressure" class="single-input">kPa</li>
                            <li><h3>後輪</h3><input type="number" id="tireRearRegularPressure" name="tireRearRegularPressure" class="single-input">kPa</li>
                        </ul>
                    </div>
                    <h2 class="contents-stickyTitle">右前タイヤ</h2>
                    <div class="contents-block">
                        <h3>製造年週</h3>
                        <input type="number" id="tireMfrFrontRightCm" name="tireMfrFrontRightCm" class="single-input" placeholder="週週年年">
                        <h3>溝</h3>
                        <div style="display:flex; align-items:center;">
                            <input type="number" id="tireGrooveFrontRightCmIp" class="single-input">.<input type="number" id="tireGrooveFrontRightCmFp" class="single-input">mm
                        </div>
                        <h3>空気圧(調整前)</h3>
                        <input type="number" id="tirePressureFrontRightCm" name="tirePressureFrontRightCm" class="single-input">
                    </div>
                    <p class="notice-text">※練習用：他の3輪も同様に入力可能です。</p>
                </div>

                <div id="motion" class="tab-contents">
                    <h2 class="contents-title">ブレーキの踏みしろ、効き</h2>
                    <div class="contents-block">
                        <div class="content-radio twoChoices">
                            <div class="content-radio-block"><input type="radio" name="brakeCondition" value="1" id="b1"><label for="b1">OK</label></div>
                            <div class="content-radio-block"><input type="radio" name="brakeCondition" value="9" id="b2"><label for="b2">NG(停止)</label></div>
                        </div>
                    </div>
                </div>

                <div id="in-car" class="tab-contents">
                    <h2 class="contents-title">発炎筒の種別</h2>
                    <div class="contents-block">
                        <div class="content-radio tripleChoices">
                            <div class="content-radio-block"><input type="radio" name="flaresExist" value="1" id="f1"><label for="f1">発炎式</label></div>
                            <div class="content-radio-block"><input type="radio" name="flaresExist" value="2" id="f2"><label for="f2">LED式</label></div>
                            <div class="content-radio-block"><input type="radio" name="flaresExist" value="9" id="f3"><label for="f3">紛失</label></div>
                        </div>
                    </div>
                </div>
                
                </form>
        </div>

        <footer class="footer">
            <div class="footer-button">
                <a id="btn-save" class="is-stop">一時保存</a>
                <a id="btn-complete" class="is-complete">完了</a>
            </div>
        </footer>
    </main>
</body>
</html>
